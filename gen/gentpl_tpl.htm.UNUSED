{tablename_head}
<script type="text/javascript">
cfrep_fck='{cfrep_fck}';
</script>
<p id="message">{message}</p>

<!--#BEGIN search -->
<div id="search">
<form action="{tablename}.php" method=get name=form_ssearch id=form_ssearch>
Rechercher : 
	<input type=hidden name=action value=search id=ssearch_input_action>
	<input type=text name=search_fulltext value="[!fulltext!]" size id=ssearch_fulltext>
	<!-- BEGIN fields_search -->
	<!-- BEGIN text --><input type=text name="ssearch_{id}" id="ssearch_{id}" size={size} value="[!{id}!]"><!-- END text -->
	<!-- BEGIN int --><input type=text name="ssearch_{id}" id="ssearch_{id}" size={size} value="[!{id}!]"><!-- END int -->
	<!-- BEGIN menu -->[!menu_{id}!]<!-- END menu -->
	<!-- END fields_search -->
	tri:[!menu_orderby!]
	<input type=checkbox value="1" name=orderby_desc id="ssearch_orderby_desc">inv.
	<input type=submit value="Rechercher" id="ssearch_input_submit">
</form>
<button id="open_search_popup" class="handcursor">rech.avancée</button>
<button id="open_multimod_popup" class="handcursor">multimodif</button>
</div>
<!--#END search -->



<!--#BEGIN divlist -->
<div id=list>
<table class="tableform sortable resizable editable">
<thead><tr>
	<th class="noedit nosort" nowrap="1" align=center id="list_th_ajouter"><img src="../inc/images/picto_ajouter.gif" id="open_new_popup" class="handcursor">
		<input type=checkbox class="list_check_multimod_all" />
	</th>
	<!--#BEGIN fields -->
	<th <!--#BEGIN if_noedit -->class="noedit nosort"<!--#END if_noedit --> align=center id="list_th_[!id!]">
		[!label!]</th><!--#END fields -->{tablename_headp}
	<th class="noedit nosort" nowrap="1" align=center id="list_th_ajouter"><img src="../inc/images/picto_ajouter.gif" id="open_new_popup2" class="handcursor"></th>
	</tr></thead>
<tfoot><tr>
	<th nowrap="1" align=center ><img src="../inc/images/picto_ajouter.gif" id="open_new_popup3" class="handcursor">
		<input type=checkbox class="list_check_multimod_all" />
	</th>
	<!--#BEGIN fields --><th align=center>[!label!]</th><!--#END fields -->
	<th align=center>&nbsp;</th>
	</tr></tfoot>
<tbody>
<!--#BEGIN list -->
<tr class="listline[!parite!]" id="list_tr_[!{tbid}!]">
<td class="noedit nosort" nowrap="1" >
<img src="../inc/images/picto_modifier.gif" onClick="gentpl_edit([!{tbid}!],'','{openpopup}');" class="handcursor">
<img src="../inc/images/picto_effacer.gif"  onClick="gentpl_edit([!{tbid}!],'','{openpopup}');" class="handcursor">
<input type=checkbox class="list_check_multimod" id="list_check_multimod_[!{tbid}!]" />
</td>

<!-- BEGIN line -->
<td <!-- BEGIN if_noedit -->class="noedit nosort"<!-- END if_noedit --> 
><!-- BEGIN if_href --><span class="handcursor" {href_extra} onclick="gentpl_edit('[!{tbid}!]','{href}','{type_href}')">
<!-- END if_href -->[!{idaff}_aff!]{affix}{postfix}<!-- BEGIN if_href --></span>
<!-- END if_href --></td>
<!-- END line -->

{tablename_loop}
<td class="noedit nosort" nowrap="1" >
<img src="../inc/images/picto_modifier.gif" onClick="gentpl_edit([!{tbid}!],'','{openpopup}');" class="handcursor">
<img src="../inc/images/picto_effacer.gif" onClick="gentpl_edit([!{tbid}!],'','{openpopup}');" class="handcursor">
</td></tr>
<!--#END list -->
</tbody>
</table>
{tablename_endp}

<p id="pagination"><!--#BEGIN pagination -->
<!--#BEGIN pagination_prec --><a href="[!pagination_url!]">[!pagination!]</a><!--#END pagination_prec -->
<!--#BEGIN pagination_act --><span>[!pagination!]</span><!--#END pagination_act -->
<!--#BEGIN pagination_suiv --><a href="[!pagination_url!]">[!pagination!]</a><!--#END pagination_suiv -->
<span id="pagination_total">total:[!pagination_nb!]</span>
<!--#BEGIN pagination_act --><select onchange="location.href='[!pagination_url!]&pagination_pag='+this.value;"><option value=""></option><option value=5>5</option><option value=10>10</option><option value=20>20</option><option value=50>50</option><option value=100>100</option><option value=300>300</option><option value=500>500</option></select><!--#END pagination_act -->
<!--#END pagination -->
<a href="{tablename}.php?action2=export" target="_blank">Exporter</a>
</p>
</div>
<!--#END divlist -->

<!--#BEGIN form -->
{tablename_headf}
<div id="edit">
<form action="{tablename}.php" method=post ENCTYPE="multipart/form-data" name=form_[!{tbid}!] id=form_[!{tbid}!]>
		<input type=hidden name=action value=mod id=input_action_[!{tbid}!]>
		<input type=hidden name=popup value="[!popup!]">
		<input type=hidden name="{tbid}" size=20 value="[!{tbid}!]" id=input_{tbid}_[!{tbid}!]>
<table class="tableform">
<!-- BEGIN fields -->
<tr class="{type} divitem" id="list_div_{id}_[!{tbid}!]">
<!-- BEGIN text -->
	<td class="label" id="list_label_{id}_[!{tbid}!]">{label}</td>
		<td class="input" id="list_input_{id}_[!{tbid}!]">
		<input type=text name={id} id="list_{id}_[!{tbid}!]" size={size} value="[!{id}!]"></td>
<!-- END text -->
<!-- BEGIN int -->
	<td class="label" id="list_label_{id}_[!{tbid}!]">{label}</td>
	<td class="input" id="list_input_{id}_[!{tbid}!]">
		<input type=text name={id} id="list_{id}_[!{tbid}!]" size={size} value="[!{id}!]"></td>
<!-- END int -->
<!-- BEGIN menu -->
	<td class="label" id="list_label_{id}_[!{tbid}!]">{label}</td>
	<td class="input" id="list_input_{id}_[!{tbid}!]">[!menu_{id}!]</td>
<!-- END menu -->
<!-- BEGIN longtext -->
	<td class="label" id="list_label_{id}_[!{tbid}!]">{label}</td>
	<td class="input" id="list_input_{id}_[!{tbid}!]">
		<textarea rows={rows} cols={cols} name={id} id="list_{id}_[!{tbid}!]">[!{id}!]</textarea></td>
<!-- END longtext -->
<!-- BEGIN html -->
	<td class="label" id="list_label_{id}">{label}</td>
	<td class="input" id="list_input_{id}">
	<textarea id="{id}" name="{id}" >[!{id}_fck!]</textarea>
	<script type='text/javascript'>
		var oFCKeditor = new FCKeditor('{id}');
		oFCKeditor.Width={width};
		oFCKeditor.Height={height};
		oFCKeditor.BasePath = '/admin/FCKeditor/';
		oFCKeditor.Config["ToolbarStartExpanded"] = false ;
		oFCKeditor.ReplaceTextarea() ;
	</script>
	</td>
<!-- END html -->
<!-- BEGIN photo -->
	<td class="label" id="list_label_{id}">{label}</td>
	<td class="input" id="list_input_{id}">
		"[!{id}!]":<br/>
		<img src="{dir}/[!{id}_img!]" border=0><br/>
		<input type=file name="list_{id}" id="list_{id}" size={size} value="[!{id}!]">
	<!--#BEGIN edit_{id}_sizes -->
		<br/>[!ext!]:<img src="{dir}/[!{id}_ext!]" border=0>
	<!--#END edit_{id}_sizes -->
		</td>
<!-- END photo -->
<!-- BEGIN file -->
	<td class="label" id="list_label_{id}">{label}</td>
	<td class="input" id="list_input_{id}">
		<a href="/{dir}/[!{id}!]" target="file">"[!{id}!]"</a>:
		<input type=button onClick="gentpl_editupload('[!{tbid}!]','{id}',this);" value="UPLOAD">
	</td>
<!-- END file -->
<!-- BEGIN editcode -->
	<td class="label" id="list_label_{id}">{label}</td>
	<td class="input" id="list_input_{id}">
		{editcode}
	</td>
<!-- END editcode -->
<!-- BEGIN date -->
	<td class="label" id="list_label_{id}_[!{tbid}!]">{label}</td>
	<td class="input" id="list_input_{id}_[!{tbid}!]">
		<input type=text name={id} id="list_{id}_[!{tbid}!]" size={size} value="[!{id}_aff!]">
		<script type="text/javascript">
		Calendar.setup({inputField:"list_{id}_[!{tbid}!]",ifFormat:"%d/%m/%Y",showsTime:false,timeFormat:"24"});
		</script>
	</td>
<!-- END date -->
{tablename_fieldf}
</tr>
<!-- END fields -->
</table>
<input class="but_submit" type=submit value=modifier id="list_input_submit_mod">
<input class="but_submit" type=submit value=dupliquer id="list_input_submit_dup"
 onclick="form_[!{tbid}!].{tbid}.value='';form_[!{tbid}!].action.value='add';return true">
</form>
{tablename_endf}

<form action="{tablename}.php" method=get name="form_del_[!{tbid}!]" id="form_del_[!{tbid}!]">
	<input type=hidden name=action value=del id=del_input_[!{tbid}!]>
	<input type=hidden name={tbid} value="[!{tbid}!]" id=del_{tbid}_[!{tbid}!]>
	<input type=hidden name="popup" value="[!popup!]">
	<input type=submit value=supprimer id="upload_input_submit_del">
</form>
<!--#BEGIN if_not_popup -->
<br/><input type=button onclick="location.href='{tablename}.php'" value="Retour Ã  la liste" />
<!--#END if_not_popup -->
</div>
<!--#END form -->
<!--#BEGIN search -->
<div id="search_div_id" style="display:none;">
<div id="search_div_header"><img id="search_div_header_img" src="../inc/images/picto_fermer.gif"><h2>Recherche</h2></div>
<div id="search_div_contenu">
<form action="{tablename}.php" method=get name=form_search id=form_search>
<input type=hidden name=action value=search id=search_input_action>
<table class="tableform">
<!-- BEGIN fields -->
<tr class="divitem {type}" id="search_div_{id}">
<!-- BEGIN text -->
	<td class="label" id="search_label_{id}">{label}</td>
	<td class="input" id="search_input_{id}">
		<input type=text name="search_{id}" id="search_{id}" size={size} value="[!{id}!]">
		<span class="isnull">non:<input type=checkbox name="search_{id}_not"  id="search_{id}_not"  value="1" onClick="$F(search_{id})=''" [!search_{id}_not_checked!]></span>
		<span class="isnull">nul:<input type=checkbox name="search_{id}_null" id="search_{id}_null" value="1" onClick="$F(search_{id})=''" [!search_{id}_null_checked!]></span>
		</td>
<!-- END text -->
<!-- BEGIN int -->
	<td class="label" id="search_label_{id}">{label}</td>
	<td class="input" id="search_input_{id}">
		<input type=text name="search_{id}" id="search_{id}" size={size} value="[!{id}!]">
		<span class="isnull">non:<input type=checkbox name="search_{id}_not"  id="search_{id}_not"  value="1" onClick="$F(search_{id})=''" [!search_{id}_not_checked!]></span>
		<span class="isnull">nul:<input type=checkbox name="search_{id}_null" id="search_{id}_null" value="1" onClick="$F(search_{id})=''" [!search_{id}_null_checked!]></span>
</td>
<!-- END int -->
<!-- BEGIN menu -->
	<td class="label" id="search_label_{id}">{label}</td>
	<td class="input" id="search_input_{id}">
		[!menu_{id}!]
		<span class="isnull">non:<input type=checkbox name="search_{id}_not"  id="search_{id}_not"  value="1" onClick="$F(search_{id})=''" [!search_{id}_not_checked!]></span>
		<span class="isnull">nul:<input type=checkbox name="search_{id}_null" id="search_{id}_null" value="1" onClick="$F(search_{id})=''" [!search_{id}_null_checked!]></span>
	</td>
<!-- END menu -->
<!-- BEGIN longtext -->
	<td class="label" id="search_label_{id}">{label}</td>
	<td class="input" id="search_input_{id}">
		<textarea rows={rows} cols={cols} name="search_{id}" id="search_{id}">[!{id}!]</textarea>
		<span class="isnull">non:<input type=checkbox name="search_{id}_not"  id="search_{id}_not"  value="1" onClick="$F(search_{id})=''" [!search_{id}_not_checked!]></span>
		<span class="isnull">nul:<input type=checkbox name="search_{id}_null" id="search_{id}_null" value="1" onClick="$F(search_{id})=''" [!search_{id}_null_checked!]></span>
	</td>
<!-- END longtext -->
<!-- BEGIN html -->
	<td class="label" id="search_label_{id}">{label}</td>
	<td class="input" id="search_input_{id}">
		<input type=text name="search_{id}" id="search_{id}" size={size} value="[!{id}!]">
		<span class="isnull">non:<input type=checkbox name="search_{id}_not"  id="search_{id}_not"  value="1" onClick="$F(search_{id})=''" [!search_{id}_not_checked!]></span>
		<span class="isnull">nul:<input type=checkbox name="search_{id}_null" id="search_{id}_null" value="1" onClick="$F(search_{id})=''" [!search_{id}_null_checked!]></span>
	</td>
<!-- END html -->
<!-- BEGIN photo -->
	<td class="label" id="search_label_{id}">{label}</td>
	<td class="input" id="search_input_{id}">
		<input type=text name="search_{id}" id="search_{id}" size={size} value="[!{id}!]">
		<span class="isnull">non:<input type=checkbox name="search_{id}_not"  id="search_{id}_not"  value="1" onClick="$F(search_{id})=''" [!search_{id}_not_checked!]></span>
		<span class="isnull">nul:<input type=checkbox name="search_{id}_null" id="search_{id}_null" value="1" onClick="$F(search_{id})=''" [!search_{id}_null_checked!]></span>
	</td>
<!-- END photo -->
<!-- BEGIN hidden -->
<!-- END hidden -->
<!-- BEGIN date -->
	<td class="label" id="search_label_{id}">{label}</td>
	<td class="input" id="search_input_{id}">
		<input type=text name="search_{id}" id="search_{id}" size={size} value="[!{id}!]">
		<script type="text/javascript">
		Calendar.setup({inputField:"search_{id}",ifFormat:"%d/%m/%Y",showsTime:false,timeFormat:"24"});
		</script>
		<span class="isnull">non:<input type=checkbox name="search_{id}_not"  id="search_{id}_not"  value="1" onClick="$F(search_{id})=''" [!search_{id}_not_checked!]></span>
		<span class="isnull">nul:<input type=checkbox name="search_{id}_null" id="search_{id}_null" value="1" onClick="$F(search_{id})=''" [!search_{id}_null_checked!]></span>
	</td>
<!-- END date -->
</tr>
<!-- END fields -->
<tr><td colspan=2>
	<p class="but_submit" id="search_submit">
	trier par : [!menu_orderby!]
		<input type=checkbox value="1" name=orderby_desc id="orderby_desc">inverse
		<br/><br/>
		<input type=submit value=rechercher id="search_input_submit">
		<!-- input type=button value=effacer id="search_input_reset" 
			onClick="$A($$('#form_search input')).each(function(v){
				alert(v.id+'='+v.value);
				v.clear();v.value='';
				alert(v.id+'='+v.value);
				})" --></p>
</td></tr>
</table>
</form>
</div>
</div>
<!--#END search -->
<!--#BEGIN new -->
<div id="new_div_id" style="display:none;">
<form action="{tablename}.php" method=post ENCTYPE="multipart/form-data" name=form_new id=form_new>
<input type=hidden name=action value=add id=input_action_[!{tbid}!]>
<input type=hidden name=popup value="[!popup!]">
<table class="tableform">
<!-- BEGIN fields_noid -->
<tr class="{type} divitem" id="new_div_{id}">
<!-- BEGIN text -->
	<td class="label" id="new_label_{id}">{label}</td>
	<td class="input" id="new_input_{id}">
		<input type=text name={id} id="new_{id}" size={size} value="[!{id}!]"></td>
<!-- END text -->
<!-- BEGIN int -->
	<td class="label" id="new_label_{id}">{label}</td>
	<td class="input" id="new_input_{id}">
		<input type=text name={id} id="new_{id}" size={size} value="[!{id}!]"></td>
<!-- END int -->
<!-- BEGIN menu -->
	<td class="label" id="new_label_{id}">{label}</td>
	<td class="input" id="new_input_{id}">
		[!menu_{id}!]</td>
<!-- END menu -->
<!-- BEGIN longtext -->
	<td class="label" id="new_label_{id}">{label}</td>
	<td class="input" id="new_input_{id}">
		<textarea rows={rows} cols={cols} name={id} id="new_{id}">[!{id}!]</textarea></td>
<!-- END longtext -->
<!-- BEGIN html -->
	<td class="label" id="new_label_{id}">{label}</td>
	<td class="input" id="new_input_{id}">
		<input type=text name="new_{id}" id="new_{id}" size={size} value="[!{id}!]"></td>
<!-- END html -->
<!-- BEGIN photo -->
	<td class="label" id="new_label_{id}">{label}</td>
	<td class="input" id="new_input_{id}">
		<input type=file name="new_{id}" id="new_{id}" size={size} value="[!{id}!]">
		</td>
<!-- END photo -->
<!-- BEGIN date -->
	<td class="label" id="new_label_{id}">{label}</td>
	<td class="input" id="new_input_{id}">
		<input type=text name={id} id="new_{id}" size={size} value="[!{id}!]">
		<script type="text/javascript">
		Calendar.setup({inputField:"new_{id}",ifFormat:"%d/%m/%Y",showsTime:false,timeFormat:"24"});
		</script>
	</td>
<!-- END date -->
<!-- BEGIN hidden -->
<!-- END hidden -->
</tr>
<!-- END fields_noid -->
<tr><td colspan=2>
	<p class="but_submit" id="new_submit">
		<input type=submit value=ajouter id="new_input_submit"></p>
</td></tr></table>
</form>
</div>
</div>
<!--#END new -->
<!--#BEGIN multimod -->
<div id="multimod_div_id" style="display:none;">
<div id="multimod_div_header"><img id="multimod_div_header_img" src="../inc/images/picto_fermer.gif">
	<h2>Modifications Multiples</h2></div>
<div id="multimod_div_contenu">
<form action="{tablename}.php" method=get name="form_multimod" id="form_multimod">
<input type=hidden name=action value=action_multimod id=multimod_input_action>
<table class="tableform">
<!-- BEGIN fields -->
<tr class="{type} divitem" id="multimod_div_{id}_[!{tbid}!]">
<!-- BEGIN text -->
	<td class="label" id="multimod_label_{id}_[!{tbid}!]">{label}</td>
		<td class="input" id="multimod_input_{id}_[!{tbid}!]">
		<input type=text name={id} id="multimod_{id}_[!{tbid}!]" size={size} value="[!{id}!]"></td>
<!-- END text -->
<!-- BEGIN int -->
	<td class="label" id="multimod_label_{id}_[!{tbid}!]">{label}</td>
	<td class="input" id="multimod_input_{id}_[!{tbid}!]">
		<input type=text name={id} id="multimod_{id}_[!{tbid}!]" size={size} value="[!{id}!]"></td>
<!-- END int -->
<!-- BEGIN menu -->
	<td class="label" id="multimod_label_{id}_[!{tbid}!]">{label}</td>
	<td class="input" id="multimod_input_{id}_[!{tbid}!]">[!menu_{id}!]</td>
<!-- END menu -->
<!-- BEGIN longtext -->
	<td class="label" id="multimod_label_{id}_[!{tbid}!]">{label}</td>
	<td class="input" id="multimod_input_{id}_[!{tbid}!]">
		<textarea rows={rows} cols={cols} name={id} id="multimod_{id}_[!{tbid}!]">[!{id}!]</textarea></td>
<!-- END longtext -->
<!-- BEGIN html -->
	<td class="label" id="multimod_label_{id}">{label}</td>
	<td class="input" id="multimod_input_{id}">
		<textarea rows={rows} cols={cols} name={id} id="multimod_{id}_[!{tbid}!]">[!{id}!]</textarea></td>
	</td>
<!-- END html -->
<!-- BEGIN photo -->
	<td class="label" id="multimod_label_{id}">{label}</td>
	<td class="input" id="multimod_input_{id}">
		"[!{id}!]":<br/>
		<img src="{dir}/[!{id}_img!]" border=0><br/>
		<input type=file name="multimod_{id}" id="multimod_{id}" size={size} value="[!{id}!]">
	<!--#BEGIN edit_{id}_sizes -->
		<br/>[!ext!]:<img src="{dir}/[!{id}_ext!]" border=0>
	<!--#END edit_{id}_sizes -->
		</td>
<!-- END photo -->
<!-- BEGIN file -->
	<td class="label" id="multimod_label_{id}">{label}</td>
	<td class="input" id="multimod_input_{id}">
		<a href="/{dir}/[!{id}!]" target="file">"[!{id}!]"</a>:
		<input type=button onClick="gentpl_editupload('[!{tbid}!]','{id}',this);" value="UPLOAD">
	</td>
<!-- END file -->
<!-- BEGIN editcode -->
	<td class="label" id="multimod_label_{id}">{label}</td>
	<td class="input" id="multimod_input_{id}">
		{editcode}
	</td>
<!-- END editcode -->
<!-- BEGIN date -->
	<td class="label" id="multimod_label_{id}_[!{tbid}!]">{label}</td>
	<td class="input" id="multimod_input_{id}_[!{tbid}!]">
		<input type=text name={id} id="multimod_{id}_[!{tbid}!]" size={size} value="[!{id}_aff!]">
		<script type="text/javascript">
		Calendar.setup({inputField:"multimod_{id}_[!{tbid}!]",ifFormat:"%d/%m/%Y",showsTime:false,timeFormat:"24"});
		</script>
	</td>
<!-- END date -->
<!-- BEGIN hidden -->
<!-- END hidden -->
</tr>
<!-- END fields -->
</table>
<input class="but_submit" type=button value=modifier id="multimod_input_submit_mod">
<input class="but_submit" type=button value=supprimer id="multimod_input_submit_del">
</form>
<div id="multimod_div_ok"></div>
</div>
<!--#END multimod -->


<!--#BEGIN if_popup -->
<input type="button" id="popup_close" onClick="window.close()" value="Fermer">
<!--#END if_popup -->


<div id="editupload" style="display:none;">
<div id="editupload_header"><img id="editupload_header_img" src="../inc/images/picto_fermer.gif"><h2>UPLOAD</h2></div>
<div id="editupload_contenu">
	<iframe id="editupload_target" name="editupload_target" 
		src="" 
		style="width:300px;height:100px;border:1"></iframe>
</div>
</div>



<script type="text/javascript">
/* zIndex: 100, resizable: true, showEffect:Effect.BlindDown, hideEffect: Effect.SwitchOff, wiredDrag: true top:30, draggable:false, modal:true, */
 	//$('article_popupdiapo').show();
	//win_search.setStatusBar("Photos de "+$F("article_nom")); 
//Event.observe(window, 'load',function() { 

FastInit.addOnLoad(function() { 

<!--#BEGIN search -->
/*
	var win_search = new Window({
		className: "mac_os_x", 
		width:600, 
		height:400,
		showEffect:  Element.show,
		hideEffect:  Element.hide,
		title: "recherche" 
		});
	win_search.setContent('search_div_id');
*/
	new ResizableWindow('search_div_id',{minWidth:100,minHeight:100,maxWidth:900,maxHeight:800,dragOptions:{handle:'search_div_header'}});
	var win_search = new Draggable('search_div_id', {handle:'search_div_header'});

	Event.observe('open_search_popup','click',function(){
		$('search_div_id').setStyle({background:'#fff',position:'absolute',top:'200px',left:'100px',width:'500px',height:'500px'});
		$('search_div_id').toggle();
	});
	Event.observe('search_div_header_img','click',function(){$('search_div_id').hide();});

<!--#END search -->

/*	var win_new = new Window({ className: "mac_os_x", width:600, height:400, showEffect:  Element.show, hideEffect:  Element.hide, title: "nouveau" }); 
	win_new.setContent('new_div_id');    	$('new_div_id').show();   Event.observe('open_new_popup','click',function(){ gentpl_edit('','',2) });
*/
<!--#BEGIN divlist -->
	Event.observe('open_new_popup' ,'click',function(){ gentpl_edit('','','{openpopup}') });
	Event.observe('open_new_popup2','click',function(){ gentpl_edit('','','{openpopup}') });
	Event.observe('open_new_popup3','click',function(){ gentpl_edit('','','{openpopup}') });
	$$(".list_check_multimod_all").each(function(v){
		Event.observe(v,'click',function(){
			$$(".list_check_multimod").each(function(v2){v2.checked=v.checked;});
			$$(".list_check_multimod_all").each(function(v2){v2.checked=v.checked;});
		});
	});
<!--#END divlist -->
<!--#BEGIN new -->
	<!--#BEGIN if_popup -->
		$('new_div_id').show();
	<!--#END if_popup -->
<!--#END new -->

//TableKit.load();
TableKit.options.editAjaxURI = '{tablename}.php';
$$("table .resizable").each(function(t) {TableKit.Resizable.init(t,{'trueResize' : true, 'keepWidth' : false});});
$$("table .resizable").each(function(t) {TableKit.Ordering.init(t,{});});

<!--#BEGIN divlist -->
	<!--#BEGIN fields -->
	<!--#BEGIN if_menu -->
		TableKit.Editable.selectInput('list_th_[!id!]', {visible:true}, [
		<!--#BEGIN menukv -->['[!valueq!]','[!key!]'],<!--#END menukv -->['','']
					]);
	<!--#END if_menu -->
	<!--#BEGIN if_longtext -->
		TableKit.Editable.multiLineInput('list_th_[!id!]');
	<!--#END if_longtext -->
	<!--#BEGIN if_file -->
		TableKit.Editable.fileInput('list_th_[!id!]');
	<!--#END if_file -->
	<!--#END fields -->
<!--#END divlist -->
<!--#BEGIN multimod -->
	new ResizableWindow('multimod_div_id',{minWidth:100,minHeight:100,maxWidth:900,maxHeight:800,dragOptions:{handle:'multimod_div_header'}});
	var win_multimod = new Draggable('multimod_div_id', {handle:'multimod_div_header'});

	if ($('open_multimod_popup'))
		Event.observe('open_multimod_popup','click',function(){
			$('multimod_div_id').setStyle({background:'#fff',position:'absolute',top:'200px',left:'100px',width:'500px',height:'500px'});
			$('multimod_div_id').toggle();
		});
	Event.observe('multimod_div_header_img','click',function(){$('multimod_div_id').hide();});
	Event.observe('multimod_input_submit_mod','click',function(){
		nb_list_check_multimod=0;
		$$(".list_check_multimod").each(function(v){
			if (v.checked) nb_list_check_multimod++;})
		if (!confirm('Modification de '+nb_list_check_multimod+' éléments ?'))
			return;
		$$(".list_check_multimod").each(function(v){
			id=v.id.substring(String("list_check_multimod_").length)
			if (v.checked)
				new Ajax.Updater('multimod_div_ok','{tablename}.php?id='+id,{
					insertion:'after',
					parameters:Form.serialize('form_multimod')
					});
			v.checked=false;
		});
	});
	Event.observe('multimod_input_submit_del','click',function(){
		nb_list_check_multimod=0;
		$$(".list_check_multimod").each(function(v){
			if (v.checked) nb_list_check_multimod++;})
		if (!confirm('Suppression de '+nb_list_check_multimod+' éléments ?'))
			return;
		$$(".list_check_multimod").each(function(v){
			id=v.id.substring(String("list_check_multimod_").length)
			if (v.checked)
				new Ajax.Updater('multimod_div_ok','{tablename}.php?id='+id,{
					insertion:'after',
					parameters:{action:'action_multidel'}
					});
			v.checked=false;
		});
	});

<!--#END multimod -->
});//end onload

function gentpl_editupload(v_id,v_field,v_this)
{
	new ResizableWindow('editupload',{minWidth:100,minHeight:100,maxWidth:900,maxHeight:800,dragOptions:{handle:'editupload_header'}});
	var win_editupload = new Draggable('editupload', {handle:'editupload_header'});
	Event.observe('editupload_header_img','click',function(){$('editupload').hide();});
	$('editupload_target').src='{tablename}.php?action=editupload_form&editupload_id='+v_id+'&editupload_field='+v_field;
	if (v_this)
		$('editupload').setStyle({
				'top' : v_this.cumulativeOffset()[1] + 'px',
				'left' : v_this.cumulativeOffset()[0] + 'px',
				'position' : 'absolute'
			});
	$('editupload').show();
}
function gentpl_edit(v_tbid,v_href,type_href)
{
	e_popup=(type_href==2)?1:0;//0:rien,1:location,2:pop,3:pwc
	e_action='edit'
	e_href='{tablename}.php?action='+e_action+'&popup='+e_popup+'&{tbid}='+v_tbid+'';
	if (v_href!='') e_href=v_href;//overwrite
	if (type_href=='3'){
		//win_edit.setAjaxContent('http://{http_host}/{script_name}'+'?'+'action=edit&ajax=1&prd_id='+prd_id,'',true,false);
		//win_edit.show();
	}
	if (type_href=='2'){
		window.open(e_href,'{tablename}_edit','width=850,height=600,resizable=yes,toolbar=yes,scrollbars=yes');
	}
	if ((type_href=='1')||(type_href=='')||(type_href=='0')){
		location.href=e_href;
	}
}
</script>

{tablename_end}

